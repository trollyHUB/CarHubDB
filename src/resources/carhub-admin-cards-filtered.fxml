<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane style="-fx-background-color: #f5f5f5;" xmlns="http://javafx.com/javafx/17.0.12" xmlns:fx="http://javafx.com/fxml/1" fx:controller="controllers.CarHubController">

    <top>
        <VBox spacing="10" style="-fx-padding: 15; -fx-background-color: white; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 5, 0, 0, 2);">
            <HBox alignment="CENTER_LEFT" spacing="10">
                <Label style="-fx-font-size: 22px; -fx-font-weight: bold;" text="ðŸ‘‘ ÐŸÐ°Ð½ÐµÐ»ÑŒ Ð°Ð´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€Ð°" />
                <Region HBox.hgrow="ALWAYS" />
                <Button onAction="#openStatistics" style="-fx-background-color: #9C27B0; -fx-text-fill: white; -fx-cursor: hand; -fx-font-size: 14px;" text="ðŸ“Š Ð¡Ñ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ°" />
                <Button onAction="#switchToTableView" style="-fx-background-color: #e0e0e0; -fx-cursor: hand;" text="ðŸ“‹ Ð¢Ð°Ð±Ð»Ð¸Ñ†Ð°" />
                <Button onAction="#switchToCardView" style="-fx-background-color: #2196F3; -fx-text-fill: white; -fx-cursor: hand;" text="ðŸŽ´ ÐšÐ°Ñ€Ñ‚Ð¾Ñ‡ÐºÐ¸" />
                <Button onAction="#logout" style="-fx-background-color: #f44336; -fx-text-fill: white; -fx-cursor: hand;" text="Ð’Ñ‹Ñ…Ð¾Ð´" />
            </HBox>
            <HBox alignment="CENTER_LEFT" spacing="10">
                <TextField fx:id="searchField" prefWidth="400" promptText="ðŸ” ÐŸÐ¾Ð¸ÑÐº Ð¿Ð¾ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸ÑŽ, Ð¼Ð¾Ð´ÐµÐ»Ð¸, Ð±Ñ€ÐµÐ½Ð´Ñƒ..." style="-fx-font-size: 14px;" />
                <Button onAction="#addCar" style="-fx-background-color: #4CAF50; -fx-text-fill: white; -fx-font-size: 14px; -fx-cursor: hand;" text="Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð°Ð²Ñ‚Ð¾ âž•" />
                <Button onAction="#editCar" style="-fx-background-color: #FF9800; -fx-text-fill: white; -fx-cursor: hand;" text="Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ âœ" />
                <Button onAction="#deleteCar" style="-fx-background-color: #f44336; -fx-text-fill: white; -fx-cursor: hand;" text="Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ ðŸ—‘" />
                <Button onAction="#exportToCSV" style="-fx-background-color: #009688; -fx-text-fill: white; -fx-cursor: hand;" text="ðŸ’¾ Ð­ÐºÑÐ¿Ð¾Ñ€Ñ‚ CSV" />
            </HBox>

            <!-- ÐŸÐ°Ð½ÐµÐ»ÑŒ Ñ„Ð¸Ð»ÑŒÑ‚Ñ€Ð¾Ð² Ð¸ ÑÐ¾Ñ€Ñ‚Ð¸Ñ€Ð¾Ð²ÐºÐ¸ -->
            <VBox spacing="8" style="-fx-padding: 10; -fx-background-color: #f9f9f9; -fx-background-radius: 8;">
                <Label style="-fx-font-weight: bold; -fx-font-size: 14px;" text="ðŸ” Ð¤Ð¸Ð»ÑŒÑ‚Ñ€Ñ‹ Ð¸ ÑÐ¾Ñ€Ñ‚Ð¸Ñ€Ð¾Ð²ÐºÐ°" />

                <HBox alignment="CENTER_LEFT" spacing="15">
                    <!-- Ð¡Ð¾Ñ€Ñ‚Ð¸Ñ€Ð¾Ð²ÐºÐ° -->
                    <Label text="Ð¡Ð¾Ñ€Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ:" />
                    <Button fx:id="sortPriceBtn" onAction="#sortByPrice" style="-fx-cursor: hand;" text="ÐŸÐ¾ Ñ†ÐµÐ½Ðµ â†‘" />
                    <Button fx:id="sortYearBtn" onAction="#sortByYear" style="-fx-cursor: hand;" text="ÐŸÐ¾ Ð³Ð¾Ð´Ñƒ â†‘" />
                    <Button fx:id="sortMileageBtn" onAction="#sortByMileage" style="-fx-cursor: hand;" text="ÐŸÐ¾ Ð¿Ñ€Ð¾Ð±ÐµÐ³Ñƒ â†‘" />
                    <Button onAction="#resetSort" style="-fx-background-color: #9E9E9E; -fx-text-fill: white; -fx-cursor: hand;" text="Ð¡Ð±Ñ€Ð¾ÑÐ¸Ñ‚ÑŒ" />

                    <Separator orientation="VERTICAL" />

                    <!-- Ð¤Ð¸Ð»ÑŒÑ‚Ñ€ Ð¿Ð¾ Ð±Ñ€ÐµÐ½Ð´Ñƒ -->
                    <Label text="Ð‘Ñ€ÐµÐ½Ð´:" />
                    <ComboBox fx:id="brandFilter" onAction="#applyFilters" prefWidth="150" promptText="Ð’ÑÐµ Ð±Ñ€ÐµÐ½Ð´Ñ‹" />

                    <Separator orientation="VERTICAL" />

                    <!-- Ð¡Ñ‡Ñ‘Ñ‚Ñ‡Ð¸Ðº -->
                    <Region HBox.hgrow="ALWAYS" />
                    <Label fx:id="countLabel" style="-fx-font-weight: bold; -fx-text-fill: #2196F3;" text="ÐÐ°Ð¹Ð´ÐµÐ½Ð¾: 0" />
                </HBox>

                <HBox alignment="CENTER_LEFT" spacing="15">
                    <!-- Ð”Ð¸Ð°Ð¿Ð°Ð·Ð¾Ð½ Ñ†ÐµÐ½ -->
                    <Label text="Ð¦ÐµÐ½Ð° (â‚¸):" />
                    <Label text="Ð¾Ñ‚" />
                    <TextField fx:id="minPriceField" onKeyReleased="#applyFilters" prefWidth="100" promptText="0" />
                    <Label text="Ð´Ð¾" />
                    <TextField fx:id="maxPriceField" onKeyReleased="#applyFilters" prefWidth="100" promptText="âˆž" />

                    <Separator orientation="VERTICAL" />

                    <!-- Ð”Ð¸Ð°Ð¿Ð°Ð·Ð¾Ð½ Ð³Ð¾Ð´Ð¾Ð² -->
                    <Label text="Ð“Ð¾Ð´:" />
                    <Label text="Ð¾Ñ‚" />
                    <ComboBox fx:id="minYearFilter" onAction="#applyFilters" prefWidth="90" promptText="Ð›ÑŽÐ±Ð¾Ð¹" />
                    <Label text="Ð´Ð¾" />
                    <ComboBox fx:id="maxYearFilter" onAction="#applyFilters" prefWidth="90" promptText="Ð›ÑŽÐ±Ð¾Ð¹" />

                    <Separator orientation="VERTICAL" />

                    <!-- ÐšÐ½Ð¾Ð¿ÐºÐ° ÑÐ±Ñ€Ð¾ÑÐ° Ñ„Ð¸Ð»ÑŒÑ‚Ñ€Ð¾Ð² -->
                    <Button onAction="#clearFilters" style="-fx-background-color: #607D8B; -fx-text-fill: white; -fx-cursor: hand;" text="ÐžÑ‡Ð¸ÑÑ‚Ð¸Ñ‚ÑŒ Ñ„Ð¸Ð»ÑŒÑ‚Ñ€Ñ‹ ðŸ—‘ï¸" />
                </HBox>
            </VBox>
        </VBox>
    </top>

    <center>
        <ScrollPane fitToWidth="true" style="-fx-background-color: #f5f5f5; -fx-background: #f5f5f5;">
            <FlowPane fx:id="cardsContainer" alignment="TOP_LEFT" hgap="20" style="-fx-padding: 20; -fx-background-color: #f5f5f5;" vgap="20" />
        </ScrollPane>
    </center>
</BorderPane>
