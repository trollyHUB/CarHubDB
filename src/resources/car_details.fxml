<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.*?>
<?import javafx.scene.layout.*?>

<ScrollPane fitToWidth="true" style="-fx-background-color: #FAFAFA; -fx-background: #FAFAFA;" stylesheets="@styles/main.css" xmlns="http://javafx.com/javafx/17.0.12" xmlns:fx="http://javafx.com/fxml/1" fx:controller="controllers.CarDetailsController">

    <VBox spacing="20" style="-fx-padding: 25; -fx-background-color: #FAFAFA;">

        <!-- Ð“Ñ€Ð°Ð´Ð¸ÐµÐ½Ñ‚Ð½Ñ‹Ð¹ Ð·Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº -->
        <VBox style="-fx-background-radius: 12;" styleClass="gradient-header">
            <Label style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: white;" text="ðŸš— Ð˜Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ Ð¾Ð± Ð°Ð²Ñ‚Ð¾Ð¼Ð¾Ð±Ð¸Ð»Ðµ" />
        </VBox>

        <!-- ÐžÑÐ½Ð¾Ð²Ð½Ð°Ñ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ Ñ Ñ„Ð¾Ñ‚Ð¾ -->
        <VBox spacing="15" styleClass="card">

            <!-- ðŸ“¸ Ð“ÐÐ›Ð•Ð Ð•Ð¯ Ð¤ÐžÐ¢ÐžÐ“Ð ÐÐ¤Ð˜Ð™ -->
            <VBox spacing="12">
                <HBox alignment="CENTER_LEFT" spacing="10">
                    <Label style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #333;" text="ðŸ“¸ Ð¤Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ð¸" />
                    <Label fx:id="photoIndexLabel" style="-fx-font-size: 14px; -fx-text-fill: #999;" text="1 / 1" />
                </HBox>

                <!-- Ð“Ð»Ð°Ð²Ð½Ð¾Ðµ Ñ„Ð¾Ñ‚Ð¾ Ñ ÐºÐ½Ð¾Ð¿ÐºÐ°Ð¼Ð¸ Ð½Ð°Ð²Ð¸Ð³Ð°Ñ†Ð¸Ð¸ -->
                <StackPane style="-fx-background-color: #f9f9f9; -fx-background-radius: 12;">
                    <ImageView fx:id="imageView" fitHeight="320" fitWidth="500" preserveRatio="true" style="-fx-background-radius: 12; -fx-effect: dropshadow(gaussian, rgba(102,126,234,0.2), 15, 0, 0, 4);" />

                    <!-- ÐšÐ½Ð¾Ð¿ÐºÐ¸ Ð½Ð°Ð²Ð¸Ð³Ð°Ñ†Ð¸Ð¸ -->
                    <HBox alignment="CENTER" spacing="400">
                        <Button fx:id="prevPhotoBtn" onAction="#previousPhoto" style="-fx-background-color: rgba(0,0,0,0.6); -fx-text-fill: white; -fx-font-size: 18px; -fx-font-weight: bold; -fx-background-radius: 50; -fx-min-width: 40; -fx-min-height: 40; -fx-cursor: hand;" text="â—€">
                            <cursor><javafx.scene.Cursor fx:constant="HAND" /></cursor>
                        </Button>

                        <Button fx:id="nextPhotoBtn" onAction="#nextPhoto" style="-fx-background-color: rgba(0,0,0,0.6); -fx-text-fill: white; -fx-font-size: 18px; -fx-font-weight: bold; -fx-background-radius: 50; -fx-min-width: 40; -fx-min-height: 40; -fx-cursor: hand;" text="â–¶">
                            <cursor><javafx.scene.Cursor fx:constant="HAND" /></cursor>
                        </Button>
                    </HBox>
                </StackPane>

                <!-- ÐœÐ¸Ð½Ð¸Ð°Ñ‚ÑŽÑ€Ñ‹ (thumbnails) -->
                <ScrollPane fx:id="thumbnailsPane" fitToHeight="true" hbarPolicy="AS_NEEDED" prefHeight="80" style="-fx-background: transparent; -fx-background-color: transparent;" vbarPolicy="NEVER">
                    <HBox fx:id="thumbnailsContainer" spacing="10" style="-fx-padding: 5;" />
                </ScrollPane>
            </VBox>

            <!-- ÐžÑÐ½Ð¾Ð²Ð½Ñ‹Ðµ Ñ…Ð°Ñ€Ð°ÐºÑ‚ÐµÑ€Ð¸ÑÑ‚Ð¸ÐºÐ¸ -->
            <VBox spacing="12">

                <!-- ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ Ð¸ Ð¼Ð¾Ð´ÐµÐ»ÑŒ -->
                <HBox alignment="CENTER_LEFT" spacing="10">
                    <Label fx:id="nameLabel" style="-fx-font-size: 22px; -fx-font-weight: bold; -fx-text-fill: #333;" />
                    <Region HBox.hgrow="ALWAYS" />
                    <Label fx:id="priceLabel" style="-fx-font-size: 26px;" styleClass="price-label" />
                </HBox>

                <Label fx:id="modelLabel" style="-fx-font-size: 16px; -fx-text-fill: #666;" />

                <Separator />

                <!-- Ð¥Ð°Ñ€Ð°ÐºÑ‚ÐµÑ€Ð¸ÑÑ‚Ð¸ÐºÐ¸ Ð² ÑÐµÑ‚ÐºÐµ -->
                <GridPane hgap="20" vgap="12">
                    <columnConstraints>
                        <ColumnConstraints minWidth="100" />
                        <ColumnConstraints minWidth="200" />
                        <ColumnConstraints minWidth="100" />
                        <ColumnConstraints minWidth="200" />
                    </columnConstraints>

                    <!-- Ð¡Ñ‚Ñ€Ð¾ÐºÐ° 1 -->
                    <Label style="-fx-font-weight: bold; -fx-text-fill: #666;" text="ðŸ· Ð‘Ñ€ÐµÐ½Ð´:" GridPane.columnIndex="0" GridPane.rowIndex="0" />
                    <Label fx:id="brandLabel" style="-fx-font-size: 15px;" GridPane.columnIndex="1" GridPane.rowIndex="0" />

                    <Label style="-fx-font-weight: bold; -fx-text-fill: #666;" text="ðŸ“… Ð“Ð¾Ð´:" GridPane.columnIndex="2" GridPane.rowIndex="0" />
                    <Label fx:id="yearLabel" style="-fx-font-size: 15px;" GridPane.columnIndex="3" GridPane.rowIndex="0" />

                    <!-- Ð¡Ñ‚Ñ€Ð¾ÐºÐ° 2 -->
                    <Label style="-fx-font-weight: bold; -fx-text-fill: #666;" text="ðŸ›£ ÐŸÑ€Ð¾Ð±ÐµÐ³:" GridPane.columnIndex="0" GridPane.rowIndex="1" />
                    <Label fx:id="mileageLabel" style="-fx-font-size: 15px;" GridPane.columnIndex="1" GridPane.rowIndex="1" />
               <rowConstraints>
                  <RowConstraints />
                  <RowConstraints />
               </rowConstraints>
                </GridPane>

                <!-- ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ -->
                <VBox spacing="8" style="-fx-padding: 10 0 0 0;">
                    <Label style="-fx-font-weight: bold; -fx-font-size: 16px; -fx-text-fill: #333;" text="ðŸ“ ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ:" />
                    <Label fx:id="descriptionLabel" style="-fx-font-size: 14px; -fx-text-fill: #666; -fx-line-spacing: 2px;" wrapText="true" />
                </VBox>
            </VBox>
        </VBox>

        <!-- â­ Ð Ð•Ð™Ð¢Ð˜ÐÐ“ Ð˜ ÐžÐ¦Ð•ÐÐšÐ˜ -->
        <VBox spacing="15" styleClass="card">
            <HBox alignment="CENTER_LEFT" spacing="10">
                <Label style="-fx-font-size: 24px;" text="â­" />
                <Label style="-fx-font-size: 20px; -fx-font-weight: bold; -fx-text-fill: #333;" text="Ð ÐµÐ¹Ñ‚Ð¸Ð½Ð³ Ð¸ Ð¾Ñ†ÐµÐ½ÐºÐ¸" />
            </HBox>

            <Separator />

            <!-- Ð¡Ñ€ÐµÐ´Ð½Ð¸Ð¹ Ñ€ÐµÐ¹Ñ‚Ð¸Ð½Ð³ -->
            <HBox alignment="CENTER_LEFT" spacing="20" style="-fx-background-color: #FFF8E1; -fx-padding: 15; -fx-background-radius: 10;">
                <Label fx:id="averageRatingLabel" style="-fx-font-size: 48px; -fx-font-weight: bold; -fx-text-fill: #FF9800;" text="0.0" />
                <VBox spacing="8">
                    <HBox fx:id="starsBox" spacing="3" />
                    <Label fx:id="ratingsCountLabel" style="-fx-text-fill: #666; -fx-font-size: 14px;" text="(0 Ð¾Ñ†ÐµÐ½Ð¾Ðº)" />
                </VBox>
            </HBox>

            <!-- ÐŸÐ¾ÑÑ‚Ð°Ð²Ð¸Ñ‚ÑŒ Ð¾Ñ†ÐµÐ½ÐºÑƒ -->
            <VBox fx:id="ratingInputBox" spacing="10" style="-fx-background-color: #F5F5F5; -fx-padding: 15; -fx-background-radius: 10;">
                <Label style="-fx-font-weight: bold; -fx-font-size: 15px;" text="ÐžÑ†ÐµÐ½Ð¸Ñ‚Ðµ ÑÑ‚Ð¾Ñ‚ Ð°Ð²Ñ‚Ð¾Ð¼Ð¾Ð±Ð¸Ð»ÑŒ:" />
                <HBox alignment="CENTER_LEFT" spacing="8">
                    <Button fx:id="star1Btn" onAction="#rateCar" styleClass="star-button" text="â­" />
                    <Button fx:id="star2Btn" onAction="#rateCar" styleClass="star-button" text="â­" />
                    <Button fx:id="star3Btn" onAction="#rateCar" styleClass="star-button" text="â­" />
                    <Button fx:id="star4Btn" onAction="#rateCar" styleClass="star-button" text="â­" />
                    <Button fx:id="star5Btn" onAction="#rateCar" styleClass="star-button" text="â­" />
                </HBox>
            </VBox>
        </VBox>

        <!-- ðŸ’¬ ÐšÐžÐœÐœÐ•ÐÐ¢ÐÐ Ð˜Ð˜ -->
        <VBox spacing="15" styleClass="card">
            <HBox alignment="CENTER_LEFT" spacing="10">
                <Label style="-fx-font-size: 24px;" text="ðŸ’¬" />
                <Label style="-fx-font-size: 20px; -fx-font-weight: bold; -fx-text-fill: #333;" text="ÐšÐ¾Ð¼Ð¼ÐµÐ½Ñ‚Ð°Ñ€Ð¸Ð¸" />
                <Label fx:id="commentsCountLabel" style="-fx-font-size: 13px;" styleClass="badge-info" text="(0)" />
            </HBox>

            <Separator />

            <!-- Ð¤Ð¾Ñ€Ð¼Ð° Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ñ ÐºÐ¾Ð¼Ð¼ÐµÐ½Ñ‚Ð°Ñ€Ð¸Ñ -->
            <VBox fx:id="commentInputBox" spacing="10" style="-fx-background-color: #F5F5F5; -fx-padding: 15; -fx-background-radius: 10;">
                <Label style="-fx-font-weight: bold; -fx-font-size: 14px;" text="ÐÐ°Ð¿Ð¸ÑÐ°Ñ‚ÑŒ ÐºÐ¾Ð¼Ð¼ÐµÐ½Ñ‚Ð°Ñ€Ð¸Ð¹:" />
                <TextArea fx:id="commentTextArea" prefRowCount="3" promptText="ÐŸÐ¾Ð´ÐµÐ»Ð¸Ñ‚ÐµÑÑŒ ÑÐ²Ð¾Ð¸Ð¼ Ð¼Ð½ÐµÐ½Ð¸ÐµÐ¼ Ð¾Ð± ÑÑ‚Ð¾Ð¼ Ð°Ð²Ñ‚Ð¾Ð¼Ð¾Ð±Ð¸Ð»Ðµ..." style="-fx-font-size: 14px;" wrapText="true" />
                <HBox spacing="10">
                    <Button onAction="#addComment" styleClass="btn-success" text="ðŸ“ ÐžÑ‚Ð¿Ñ€Ð°Ð²Ð¸Ñ‚ÑŒ" />
                    <Button onAction="#clearComment" styleClass="btn-light" text="ÐžÑ‡Ð¸ÑÑ‚Ð¸Ñ‚ÑŒ" />
                </HBox>
            </VBox>

            <!-- Ð¡Ð¿Ð¸ÑÐ¾Ðº ÐºÐ¾Ð¼Ð¼ÐµÐ½Ñ‚Ð°Ñ€Ð¸ÐµÐ² -->
            <VBox fx:id="commentsListBox" spacing="12" />
        </VBox>

        <!-- ðŸš— Ð‘Ð ÐžÐÐ˜Ð ÐžÐ’ÐÐÐ˜Ð• Ð˜ ÐŸÐžÐšÐ£ÐŸÐšÐ -->
        <VBox fx:id="actionsBox" spacing="15" styleClass="card">
            <HBox alignment="CENTER_LEFT" spacing="10">
                <Label style="-fx-font-size: 24px;" text="ðŸš—" />
                <Label style="-fx-font-size: 20px; -fx-font-weight: bold; -fx-text-fill: #333;" text="Ð”ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ Ñ Ð°Ð²Ñ‚Ð¾Ð¼Ð¾Ð±Ð¸Ð»ÐµÐ¼" />
            </HBox>

            <Separator />

            <HBox alignment="CENTER" spacing="15">
                <Button onAction="#openReservationForm" style="-fx-padding: 15 30; -fx-font-size: 16px;" styleClass="btn-info" text="ðŸ“… Ð—Ð°Ð±Ñ€Ð¾Ð½Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ" />
                <Button onAction="#openPurchaseForm" style="-fx-padding: 15 30; -fx-font-size: 16px;" styleClass="btn-success" text="ðŸ’° ÐšÑƒÐ¿Ð¸Ñ‚ÑŒ Ð°Ð²Ñ‚Ð¾Ð¼Ð¾Ð±Ð¸Ð»ÑŒ" />
            </HBox>

            <Label style="-fx-text-fill: #666; -fx-font-size: 13px; -fx-font-style: italic; -fx-padding: 5 0 0 0;" text="ðŸ’¡ ÐŸÐ¾ÑÐ»Ðµ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÐºÐ¸ Ð·Ð°ÑÐ²ÐºÐ¸ Ñ Ð²Ð°Ð¼Ð¸ ÑÐ²ÑÐ¶ÐµÑ‚ÑÑ Ð¼ÐµÐ½ÐµÐ´Ð¶ÐµÑ€" />
        </VBox>

        <!-- ÐšÐ½Ð¾Ð¿ÐºÐ° Ð·Ð°ÐºÑ€Ñ‹Ñ‚ÑŒ -->
        <HBox alignment="CENTER" style="-fx-padding: 10 0 0 0;">
            <Button onAction="#close" style="-fx-padding: 10 30; -fx-font-size: 14px;" styleClass="btn-light" text="âœ– Ð—Ð°ÐºÑ€Ñ‹Ñ‚ÑŒ" />
        </HBox>

    </VBox>
</ScrollPane>
