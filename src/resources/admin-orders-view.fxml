<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.geometry.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<BorderPane style="-fx-background-color: #F5F5F5;" stylesheets="@styles/main.css" xmlns="http://javafx.com/javafx/17.0.12" xmlns:fx="http://javafx.com/fxml/1" fx:controller="controllers.AdminOrdersController">
    <top>
        <VBox spacing="15" style="-fx-padding: 20; -fx-background-color: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
            <HBox alignment="CENTER_LEFT" spacing="10">
                <Button onAction="#goBack" style="-fx-font-size: 16px; -fx-background-color: white; -fx-text-fill: #667eea; -fx-cursor: hand; -fx-background-radius: 8; -fx-padding: 8 20; -fx-font-weight: bold;" text="&#8592; Назад" />
                <Region HBox.hgrow="ALWAYS" />
                <Label style="-fx-font-size: 28px; -fx-font-weight: bold; -fx-text-fill: white;" text="&#128203; Управление Заявками" />
                <Region HBox.hgrow="ALWAYS" />
                <Label fx:id="totalOrdersLabel" style="-fx-font-size: 16px; -fx-text-fill: white; -fx-background-color: rgba(255,255,255,0.3); -fx-padding: 10 20; -fx-background-radius: 20; -fx-font-weight: bold;" text="Всего: 0" />
            </HBox>
            <HBox alignment="CENTER" spacing="20">
                <Button fx:id="btnReservations" onAction="#showReservations" style="-fx-font-size: 16px; -fx-padding: 12 35; -fx-cursor: hand; -fx-background-radius: 10; -fx-font-weight: bold;" styleClass="btn-primary" text="&#128467; Бронирования" />
                <Button fx:id="btnPurchases" onAction="#showPurchases" style="-fx-font-size: 16px; -fx-padding: 12 35; -fx-cursor: hand; -fx-background-radius: 10; -fx-font-weight: bold;" styleClass="btn-light" text="&#128176; Покупки" />
            </HBox>
            <HBox alignment="CENTER_LEFT" spacing="15">
                <Label style="-fx-text-fill: white; -fx-font-size: 16px; -fx-font-weight: bold;" text="Фильтр по статусу:" />
                <ToggleButton fx:id="filterAll" onAction="#filterByStatus" selected="true" style="-fx-cursor: hand; -fx-background-color: white; -fx-text-fill: #667eea; -fx-background-radius: 8; -fx-font-weight: bold;" text="Все" />
                <ToggleButton fx:id="filterPending" onAction="#filterByStatus" style="-fx-cursor: hand; -fx-background-color: rgba(255,255,255,0.3); -fx-text-fill: white; -fx-background-radius: 8; -fx-font-weight: bold;" text="В обработке" />
                <ToggleButton fx:id="filterConfirmed" onAction="#filterByStatus" style="-fx-cursor: hand; -fx-background-color: rgba(255,255,255,0.3); -fx-text-fill: white; -fx-background-radius: 8; -fx-font-weight: bold;" text="Подтверждено" />
                <ToggleButton fx:id="filterCompleted" onAction="#filterByStatus" style="-fx-cursor: hand; -fx-background-color: rgba(255,255,255,0.3); -fx-text-fill: white; -fx-background-radius: 8; -fx-font-weight: bold;" text="Завершено" />
                <ToggleButton fx:id="filterCancelled" onAction="#filterByStatus" style="-fx-cursor: hand; -fx-background-color: rgba(255,255,255,0.3); -fx-text-fill: white; -fx-background-radius: 8; -fx-font-weight: bold;" text="Отменено" />
                <Region HBox.hgrow="ALWAYS" />
                <Button onAction="#refreshData" style="-fx-cursor: hand; -fx-background-color: white; -fx-text-fill: #667eea; -fx-background-radius: 8; -fx-padding: 8 20; -fx-font-weight: bold; -fx-font-size: 14px;" text="&#128260; Обновить" />
            </HBox>
        </VBox>
    </top>
    <center>
        <StackPane>
            <VBox fx:id="reservationsView" spacing="10" style="-fx-padding: 20;">
                <TableView fx:id="reservationsTable" VBox.vgrow="ALWAYS">
                    <columns>
                        <TableColumn fx:id="resColId" prefWidth="50" text="ID" />
                        <TableColumn fx:id="resColCar" prefWidth="150" text="Автомобиль" />
                        <TableColumn fx:id="resColCustomer" prefWidth="130" text="Клиент" />
                        <TableColumn fx:id="resColPhone" prefWidth="120" text="Телефон" />
                        <TableColumn fx:id="resColEmail" prefWidth="150" text="Email" />
                        <TableColumn fx:id="resColDate" prefWidth="140" text="Дата брони" />
                        <TableColumn fx:id="resColStatus" prefWidth="120" text="Статус" />
                        <TableColumn fx:id="resColCreated" prefWidth="140" text="Создано" />
                        <TableColumn fx:id="resColActions" prefWidth="180" text="Действия" />
                    </columns>
                </TableView>
            </VBox>
            <VBox fx:id="purchasesView" managed="false" spacing="10" style="-fx-padding: 20;" visible="false">
                <TableView fx:id="purchasesTable" VBox.vgrow="ALWAYS">
                    <columns>
                        <TableColumn fx:id="purColId" prefWidth="50" text="ID" />
                        <TableColumn fx:id="purColCar" prefWidth="150" text="Автомобиль" />
                        <TableColumn fx:id="purColCustomer" prefWidth="130" text="Клиент" />
                        <TableColumn fx:id="purColPhone" prefWidth="120" text="Телефон" />
                        <TableColumn fx:id="purColEmail" prefWidth="150" text="Email" />
                        <TableColumn fx:id="purColPrice" prefWidth="120" text="Цена" />
                        <TableColumn fx:id="purColPayment" prefWidth="120" text="Оплата" />
                        <TableColumn fx:id="purColStatus" prefWidth="120" text="Статус" />
                        <TableColumn fx:id="purColDate" prefWidth="140" text="Дата покупки" />
                        <TableColumn fx:id="purColActions" prefWidth="180" text="Действия" />
                    </columns>
                </TableView>
            </VBox>
        </StackPane>
    </center>
    <bottom>
        <HBox alignment="CENTER" spacing="15" style="-fx-padding: 15; -fx-background-color: white; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 10, 0, 0, -2);">
            <Label fx:id="statusLabel" style="-fx-font-size: 14px; -fx-text-fill: #666;" text="Выберите заявку для просмотра деталей" />
        </HBox>
    </bottom>
</BorderPane>
